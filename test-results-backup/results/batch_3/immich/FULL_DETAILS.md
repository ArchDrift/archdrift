# ðŸ“‹ DriftGuard Full Details

**Generated:** 3/1/2026, 4:42:13 pm

This document contains a line-by-line breakdown of every violation detected.

---

## Weighted Debt Calculation

**Weighted Debt Density:** 0.44 debt points per 1,000 lines of production code

**Severity Multipliers:**
- Layer Violations: Ã—10 (Fatal structural drift)
- N+1 Queries: Ã—2 (Core efficiency drift)
- God Classes: Ã—1 (Complexity drift)

**Production Code:** 22 violations (33 weighted debt) in 74,428 LOC

**Total Files:** 1005 (724 production)

---

## Violations Summary

- **Layer Violations:** 0
- **N+1 Queries:** 14
- **God Classes:** 8

---

## ðŸ“¦ God Class

### `../../../audit_targets/batch_3/immich/e2e/src/api/specs/asset.e2e-spec.ts`

- **Line 1:** Large Class detected (1076 code lines). Consider splitting into smaller modules.

### `../../../audit_targets/batch_3/immich/e2e/src/api/specs/library.e2e-spec.ts`

- **Line 1:** Large Class detected (1089 code lines). Consider splitting into smaller modules.

### `../../../audit_targets/batch_3/immich/e2e/src/web/specs/timeline/timeline.parallel-e2e-spec.ts`

- **Line 1:** Large Class detected (843 code lines). Consider splitting into smaller modules.

### `../../../audit_targets/batch_3/immich/open-api/typescript-sdk/src/fetch-client.ts`

- **Line 1:** Monolith detected (4905 code lines in type/schema definition file). Critical complexity - urgent refactoring required.

### `../../../audit_targets/batch_3/immich/server/src/repositories/asset.repository.ts`

- **Line 1:** Large Class detected (884 code lines). Consider splitting into smaller modules.

### `../../../audit_targets/batch_3/immich/server/src/schema/migrations/1752267649968-StandardizeNames.ts`

- **Line 1:** Large Class detected (1189 code lines). Consider splitting into smaller modules.

### `../../../audit_targets/batch_3/immich/server/src/services/metadata.service.ts`

- **Line 1:** Large Class detected (808 code lines). Consider splitting into smaller modules.

### `../../../audit_targets/batch_3/immich/server/src/utils/media.ts`

- **Line 1:** Large Class detected (823 code lines). Consider splitting into smaller modules.

## âš¡ N+1 Query

### `../../../audit_targets/batch_3/immich/e2e/src/api/specs/search.e2e-spec.ts`

- **Line 383:** Database/API call inside loop. Consider batching queries or moving the call outside the loop.

### `../../../audit_targets/batch_3/immich/e2e/src/api/specs/user-admin.e2e-spec.ts`

- **Line 114:** Database/API call inside loop. Consider batching queries or moving the call outside the loop.
- **Line 159:** Database/API call inside loop. Consider batching queries or moving the call outside the loop.

### `../../../audit_targets/batch_3/immich/server/src/repositories/machine-learning.repository.ts`

- **Line 173:** Database/API call inside loop. Consider batching queries or moving the call outside the loop.

### `../../../audit_targets/batch_3/immich/server/src/services/album.service.ts`

- **Line 119:** Database/API call inside loop. Consider batching queries or moving the call outside the loop.
- **Line 233:** Database/API call inside loop. Consider batching queries or moving the call outside the loop.
- **Line 292:** Database/API call inside loop. Consider batching queries or moving the call outside the loop.

### `../../../audit_targets/batch_3/immich/server/src/services/asset.service.ts`

- **Line 321:** Database/API call inside loop. Consider batching queries or moving the call outside the loop.
- **Line 326:** Database/API call inside loop. Consider batching queries or moving the call outside the loop.

### `../../../audit_targets/batch_3/immich/server/src/services/person.service.ts`

- **Line 142:** Database/API call inside loop. Consider batching queries or moving the call outside the loop.
- **Line 232:** Database/API call inside loop. Consider batching queries or moving the call outside the loop.
- **Line 257:** Database/API call inside loop. Consider batching queries or moving the call outside the loop.
- **Line 598:** Database/API call inside loop. Consider batching queries or moving the call outside the loop.

### `../../../audit_targets/batch_3/immich/web/src/service-worker/cache.ts`

- **Line 39:** Database/API call inside loop. Consider batching queries or moving the call outside the loop.

---

Generated by DriftGuard v0.4
