# Chat: Chat 7 from ebf1d29318bd9e8490b5e970ffca225d

**Source:** ebf1d29318bd9e8490b5e970ffca225d/aiService.prompts
**Messages:** 1
**Recovered:** 2026-01-03T19:39:53.687Z

---

## unknown

Add a minimal automated test setup for the analyzer.ts logic using Mocha and TypeScript, suitable for a VS Code extension.

Requirements:

Use Mocha (no Jest).

Organize tests under src/test/.

Test files are TypeScript (*.test.ts) and compile to out/test/*.test.js.

Provide a Mocha bootstrap file that VS Codeâ€™s test runner (or an npm script) can call to execute all tests.

Concretely, do the following:

Create a src/test/suite/index.ts that:

Sets up Mocha with the TDD UI, a 20s timeout,

Uses glob to find all compiled out/test/**/*.test.js files,

Adds them to Mocha and runs them,

Resolves or rejects a promise based on success/fail.

Create an example test file src/test/analyzer.test.ts with a few tests for:

God Class detection (file above and below 500 lines).

N+1 detection (file with and without DB/API calls inside loops).

Leave TODOs or stubs for the upcoming Layer Integrity rule.

Update package.json to add dev dependencies and scripts:

Dev deps: mocha, glob, @types/mocha, @types/glob.

Scripts:

"compile" (already exists, keep it)

"test": compile TypeScript then run Mocha using the compiled test bootstrap from out/test/suite/index.js.

Generate only the new/changed files needed for this test harness. Do not modify extension.ts or analyzer.ts logic right now.



---

