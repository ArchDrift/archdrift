# Chat: Chat 1 from bf8aebff7466de7d03dc21260aebd032

**Source:** bf8aebff7466de7d03dc21260aebd032/aiService.prompts
**Messages:** 1
**Recovered:** 2026-01-03T19:39:53.488Z

---

## unknown

BUILD: VS Code Extension "DriftGuard" - God Class Detector MVP

GOAL: Detect files >500 LOC and show red squiggly underlines + status bar warning.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROJECT STRUCTURE (Generate ALL files):

driftguard/
â”œâ”€â”€ package.json
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ extension.ts
â”‚   â””â”€â”€ detector.ts
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ .vscodeignore
â””â”€â”€ README.md

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILE 1: package.json

{
  "name": "driftguard",
  "displayName": "DriftGuard",
  "description": "Blocks God Classes automatically",
  "version": "0.0.1",
  "engines": { "vscode": "^1.85.0" },
  "categories": ["Linters"],
  "activationEvents": ["onStartupFinished"],
  "main": "./out/extension.js",
  "contributes": {
    "commands": [{
      "command": "driftguard.scan",
      "title": "DriftGuard: Scan Active File"
    }]
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./"
  },
  "devDependencies": {
    "@types/vscode": "^1.85.0",
    "@types/node": "^20.x",
    "typescript": "^5.3.0"
  }
}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILE 2: src/extension.ts

import * as vscode from 'vscode';
import { checkGodClass } from './detector';

let diagnosticCollection: vscode.DiagnosticCollection;
let statusBarItem: vscode.StatusBarItem;

export function activate(context: vscode.ExtensionContext) {
    diagnosticCollection = vscode.languages.createDiagnosticCollection('driftguard');
    statusBarItem = vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Right, 100);
    
    context.subscriptions.push(diagnosticCollection, statusBarItem);

    // Auto-scan on file open/save
    context.subscriptions.push(
        vscode.workspace.onDidOpenTextDocument(scanDocument),
        vscode.workspace.onDidSaveTextDocument(scanDocument)
    );

    // Manual scan command
    context.subscriptions.push(
        vscode.commands.registerCommand('driftguard.scan', () => {
            const editor = vscode.window.activeTextEditor;
            if (editor) scanDocument(editor.document);
        })
    );

    // Scan active document on activation
    if (vscode.window.activeTextEditor) {
        scanDocument(vscode.window.activeTextEditor.document);
    }
}

function scanDocument(document: vscode.TextDocument) {
    // Only scan code files
    const codeExts = ['.js', '.ts', '.jsx', '.tsx', '.py', '.java', '.go'];
    if (!codeExts.some(ext => document.fileName.endsWith(ext))) {
        return;
    }

    const result = checkGodClass(document);
    const diagnostics: vscode.Diagnostic[] = [];

    if (result.isGodClass) {
        const range = new vscode.Range(0, 0, document.lineCount - 1, 0);
        const diagnostic = new vscode.Diagnostic(
            range,
            `ğŸš¨ God Class detected (${result.lineCount} lines). Split into smaller modules. Max: 500 LOC`,
            vscode.DiagnosticSeverity.Warning
        );
        diagnostic.code = 'god-class';
        diagnostics.push(diagnostic);

        statusBarItem.text = `ğŸš¨ God Class (${result.lineCount} lines)`;
        statusBarItem.backgroundColor = new vscode.ThemeColor('statusBarItem.errorBackground');
        statusBarItem.show();
    } else {
        statusBarItem.text = `âœ… Clean (${result.lineCount} lines)`;
        statusBarItem.backgroundColor = undefined;
        statusBarItem.show();
    }

    diagnosticCollection.set(document.uri, diagnostics);
}

export function deactivate() {}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILE 3: src/detector.ts

import * as vscode from 'vscode';

export interface GodClassResult {
    isGodClass: boolean;
    lineCount: number;
}

export function checkGodClass(document: vscode.TextDocument): GodClassResult {
    const text = document.getText();
    const lines = text.split('\n');
    
    // Count non-empty, non-comment lines
    let codeLines = 0;
    let inBlockComment = false;

    for (const line of lines) {
        const trimmed = line.trim();
        
        // Skip empty lines
        if (trimmed === '') continue;
        
        // Handle block comments
        if (trimmed.startsWith('/*')) inBlockComment = true;
        if (inBlockComment) {
            if (trimmed.endsWith('*/')) inBlockComment = false;
            continue;
        }
        
        // Skip single-line comments
        if (trimmed.startsWith('//') || trimmed.startsWith('#')) continue;
        
        codeLines++;
    }

    return {
        isGodClass: codeLines > 500,
        lineCount: codeLines
    };
}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILE 4: tsconfig.json

{
  "compilerOptions": {
    "module": "commonjs",
    "target": "ES2020",
    "outDir": "out",
    "lib": ["ES2020"],
    "sourceMap": true,
    "rootDir": "src",
    "strict": true,
    "esModuleInterop": true
  },
  "exclude": ["node_modules", ".vscode-test"]
}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILE 5: .vscodeignore

.vscode/**
.vscode-test/**
src/**
.gitignore
tsconfig.json
**/*.map
**/*.ts

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FILE 6: README.md

# DriftGuard - God Class Detector

Automatically detects files >500 LOC and shows warnings.

## Install
1. Copy to `~/.vscode/extensions/driftguard/`
2. Reload VS Code
3. Open any large file

## Features
- âœ… Auto-scans on file open/save
- ğŸš¨ Red squiggles for God Classes
- ğŸ“Š Status bar line count

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

GENERATE ALL 6 FILES ABOVE. Make them production-ready.


---

