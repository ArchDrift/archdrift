# Chat: Chat 5 from e4ce8fae7a59d75128c1237eab0f2369

**Source:** e4ce8fae7a59d75128c1237eab0f2369/aiService.prompts
**Messages:** 1
**Recovered:** 2026-01-03T19:39:53.576Z

---

## unknown

Step 4: Wire VS Code test suite
Create src/test/suite/index.ts that Mocha will load:
​

ts
import * as path from 'path';
import * as Mocha from 'mocha';
import * as glob from 'glob';

export function run(): Promise<void> {
  const mocha = new Mocha({ ui: 'tdd', timeout: 20000 });
  const testsRoot = path.resolve(__dirname, '..');

  return new Promise((resolve, reject) => {
    glob('**/*.test.js', { cwd: testsRoot }, (err, files) => {
      if (err) {
        return reject(err);
      }
      files.forEach(f => mocha.addFile(path.resolve(testsRoot, f)));

      try {
        mocha.run(failures => {
          if (failures > 0) {
            reject(new Error(`${failures} tests failed.`));
          } else {
            resolve();
          }
        });
      } catch (err) {
        reject(err);
      }
    });
  });
}
Tests themselves go under src/test/*.test.ts and will be compiled to out/test/*.test.js.
​

---

